[global]
 # Server identification
 workgroup = WORKGROUP
 server string = Samba Server %v
 netbios name = SAMBASERVER

 # Security settings
 security = user
 map to guest = bad user
 guest account = nobody

 # Logging
 log file = /var/log/samba/log.%m
 max log size = 1000
 log level = 1

 # Network settings
 hosts allow = 127. 192.168. 10.
 hosts deny = ALL

 # Performance tuning
 socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=131072 SO_SNDBUF=131072

 # Disable printing by default
 load printers = no
 printing = bsd
 printcap name = /dev/null
 disable spoolss = yes

# Public share - accessible to everyone
[public]
 comment = Public File Share
 path = /srv/samba/public
 browseable = yes
 writable = yes
 guest ok = yes
 read only = no
 force user = nobody
 force group = nobody
 create mask = 0664
 directory mask = 0775

# Private share - requires authentication
[private]
 comment = Private File Share
 path = /srv/samba/private
 browseable = yes
 writable = yes
 guest ok = no
 read only = no
 valid users = @sambausers
 create mask = 0664
 directory mask = 0775

# Team share - for group collaboration
[team]
 comment = Team Collaboration Share
 path = /srv/samba/team
 browseable = yes
 writable = yes
 guest ok = no
 read only = no
 valid users = @teamusers
 force group = teamusers
 create mask = 0664
 directory mask = 0775

# Individual user directories
[users]
 comment = User Home Directories
 path = /srv/samba/users/%S
 browseable = no
 writable = yes
 guest ok = no
 read only = no
 valid users = %S
 create mask = 0600
 directory mask = 0700

# Enhanced logging configuration
[global]
 log level = 2 auth:3 sam:3
 max log size = 5000
 log file = /var/log/samba/log.%m
 debug timestamp = yes

# Performance optimization
[global]
 # TCP settings
 socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=131072 SO_SNDBUF=131072

 # SMB protocol optimization
 server min protocol = SMB2
 server max protocol = SMB3

 # Async I/O
 aio read size = 16384
 aio write size = 16384

 # Oplocks for better performance
 oplocks = yes
 level2 oplocks = yes

# Security hardening
[global]
 # Restrict SMB versions
 server min protocol = SMB2
 server max protocol = SMB3

 # Disable unnecessary features
 disable netbios = yes
 smb ports = 445

 # Enhanced security
 ntlm auth = no
 restrict anonymous = 2

 # Logging security events
 log level = 1 auth:3 winbind:2
